<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>JDBC Datasource in Tomcat 6</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/servlet/wiki?11820,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">JDBC Datasource in Tomcat 6</h1>
<!--JDBC Datasource in Tomcat 6--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>This document describes step by step How to configure a Java model in <b>GeneXus 8.0 or higher </b>to use a <b>SQL Server</b> JDBC datasource in <b>Tomcat 6</b>, using driver <b>JTDS.</b></p>

<p>1. Configure<b> \conf\context.xml</b> of your tomcat installation</p>

<p>Add the following code between the &lt;Context&gt; and &lt;/Context&gt; tag:</p>

<p>    &lt;Resource name=&quot;jdbc/<b>testsql</b>&quot;<br />
                        auth=&quot;Container&quot;<br />
                        type=&quot;javax.sql.DataSource&quot;<br />
                        driverClassName=&quot;net.sourceforge.jtds.jdbc.Driver&quot;<br />
                        url=&quot;jdbc:jtds:sqlserver://<b>yourServerName</b>:1433/<b>yourDBName</b>&quot;<br />
                        username=&quot;<b>yourUserName</b>&quot;<br />
                        password=&quot;<b>yourPassword</b>&quot;<br />
                        maxActive=&quot;8&quot;<br />
                        maxIdle=&quot;4&quot;  /&gt;</p>

<p>The fields marked in bold should be replaced with your particular data connection information. The resource name can be anyone, this is an example, and just consider to remember this name in order to use it later in Genexus.</p>

<p>2. Configure<b> \webapps\yourWebapp\web-inf\web.xml</b></p>

<p>Add the following code between the &lt;web-app&gt; and &lt;/web-app&gt; tag:</p>

<p> &lt;resource-ref&gt;<br />
     &lt;description&gt;DB Connection&lt;/description&gt;<br />
     &lt;res-ref-name&gt;jdbc/<b>testsql</b>&lt;/res-ref-name&gt;<br />
     &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;<br />
     &lt;res-auth&gt;Container&lt;/res-auth&gt;<br />
&lt;/resource-ref&gt;</p>

<p>3. <b>Copy the driver</b> (jtds1-2.jar) to the \lib folder of your tomcat installation</p>

<p>4. <b>Configure your java model </b>in Genexus:</p>

<p><span class="WikiBody" id="W0025BODY">Edit the application DBMS Options and set the following properties:<br />
<br />
Use datasource for web based applications = True<br />
JDBC datasource = java:comp/env/jdbc/testsql<br />
<br />
Where jdbc/testsql is the JNDI name of the JDBC Datasource. </span></p>

<h3><a id="Note" class="HashLink" href="#Note"><span class="WikiBody">Note</span></a></h3>

<p><span class="WikiBody">In case of Oracle Database, you should also set the JNDI name as follows: java:/comp/env/jdbc/myoracle </span><span class="WikiBody">after you've defined the datasource in </span><span class="WikiBody">your Context (\conf\context.xml of your tomcat installation).</span></p>

<p><span class="WikiBody">&lt;Resource name=&quot;jdbc/myoracle&quot; auth=&quot;Container&quot;<br />
              type=&quot;javax.sql.DataSource&quot; driverClassName=&quot;oracle.jdbc.driver.OracleDriver&quot;<br />
              url=&quot;jdbc:oracle:thin:@testorcl:1521:testorcl&quot;<br />
              username=&quot;soporte&quot; password=&quot;soporte&quot; maxActive=&quot;20&quot; maxIdle=&quot;10&quot;<br />
              maxWait=&quot;-1&quot;/&gt;</span></p>

<h3><a id="Interesting+links" class="HashLink" href="#Interesting+links"><span class="WikiBody" id="W0025BODY"><span class="ReadonlyAttLabelblack" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><span class="ReadonlyAttLabelblack" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><span class="ReadonlyAttLabelblack" id="span__DOCDETA" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><b><font size="2">Interesting links</font></b></span></span></span></span></a></h3>

<p><span class="WikiBody" id="W0025BODY"><span class="ReadonlyAttLabelblack" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><span class="ReadonlyAttLabelblack" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><span class="ReadonlyAttLabelblack" id="span__DOCDETA" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><font size="2">Here is the official documentation of how to do this in Tomcat 6, also with other dbms samples, like MySql, Postgresql, and Oracle:</font></span></span></span></span></p>

<p><a href='http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html'><span class="WikiBody"><span class="ReadonlyAttLabelblack" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><span class="ReadonlyAttLabelblack" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><span class="ReadonlyAttLabelblack" style="font-style: normal;font-family: Verdana;font-size: 8.0pt;font-weight: normal;"><font size="2">http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html</font></span></span></span></span></a></p>

<p><br />
<span style="line-height: 1.6em;"></span><br />
<span style="line-height: 1.6em;"></span><br />
<span style="line-height: 1.6em;"></span><br />
<span style="line-height: 1.6em;"><br />
</span><br />
<span style="line-height: 1.6em;"></span></p>
<br />
</td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="2112.html">Defining a JDBC Datasource</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 04/11/19 07:49 PM</em></font></td></TR></table></font>